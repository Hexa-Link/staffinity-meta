name: "Create Develop Branch on New Repository"

# Este workflow se dispara cada vez que un repositorio es creado en la organización.
on:
  repository:
    types: [created]

jobs:
  create-develop-branch:
    runs-on: ubuntu-latest
    # Se necesitan permisos para escribir contenido (la nueva rama)
    permissions:
      contents: write
    
    steps:
      # 1. Hacemos checkout del nuevo repositorio. Estará vacío excepto por la rama 'main'.
      - name: "Checkout repository"
        uses: actions/checkout@v4

      # 2. Creamos la rama 'develop' a partir de 'main' y la subimos al repositorio remoto.
      - name: "Create and push develop branch"
        run: |
          git config --global user.name 'GitHub Actions'
          git config --global user.email 'actions@github.com'
          git checkout -b develop
          git push origin develop
          echo "Successfully created and pushed the 'develop' branch."